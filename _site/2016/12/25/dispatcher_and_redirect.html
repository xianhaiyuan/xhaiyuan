<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="/bitbug_favicon.ico" >
	<link href='//cdn.webfont.youziku.com/webfonts/nomal/16790/19466/581b3353f629d80df8fad786.css' rel='stylesheet' type='text/css' />
	<!-- <link rel="stylesheet" href="/css/app.min.css"> -->
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/monokai-sublime.css">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="canonical" href="https://www.xhaiyuan.com/2016/12/25/dispatcher_and_redirect.html" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="renderer" content="webkit">
	<meta http-equiv="Cache-Control" content="no-siteapp">
	<meta name="keywords" content="白色风车 站内请求和站外请求（URL重定向） 海源 个人博客 haiyuan">
	<meta name="description" content="白色风车 海源 haiyuan">
	<meta name="author" content="海源,haiyuan,xianhaiyuan@gmail.com,269699181@qq.com">
	<title>站内请求和站外请求（URL重定向） - 海源的博客</title>
	<script>
// 	(function() {
//     if ( window.location.protocol.indexOf('s') < 0 ) {
//         window.location.protocol = 'https'
//     }
// })()
</script>
</head>

<body>
	<div class="main">
		<div class="page-title center">
			站内请求和站外请求（URL重定向）
		</div>
	<nav>
		<ul class="nav-list list-nostyled center">
			<li>
				<a class="nav-icon" href="https://www.xhaiyuan.com">
					<i class="icon-home"></i>
				</a>
				<a href="https://www.xhaiyuan.com" class="nav-link center link-active">Home
				</a>
			</li>
			<li>
				<a class="nav-icon" href="https://www.xhaiyuan.com/about">
					<i class="icon-user"></i>
				</a>
				<a href="https://www.xhaiyuan.com/about" class="nav-link center link-active">About
				</a>
			</li>
			<li class="rss">
				<a class="nav-icon" href="/feed.xml"><i class="icon-rss"></i></a>
				<a href="/feed.xml" class="nav-link center link-active" target="_blank">Rss
				</a>
			</li>
		</ul>
	</nav>
	<div class="my_page my_page--post web-font">
		<h3 id="section">站内请求和站外请求的概念</h3>

<h4 id="section-1">1. 站内请求</h4>
<p><br />
<img src="/img/post-dispatcher_and_redirect/dispatcher.jpg" alt="" /></p>

<p>上图所示，站内请求只对服务器发出一次请求，服务器返回页面2，但此时浏览器地址栏中的地址还是页面1的地址，并不会发生改变，因为是一次请求，所以request的scope会作用于页面1、页面2等等，即在请求中放的参数在页面1、页面2等都能提取得到。</p>

<h4 id="url">2. 站外请求（URL重定向）</h4>
<p><br />
<img src="/img/post-dispatcher_and_redirect/redirect.jpg" alt="" /></p>

<p>站外请求对服务器发出两次请求，第一次请求页面1，服务器返回信息给浏览器，叫浏览器去请求页面2，此时浏览器会再次请求服务器，服务器返回页面2，此时浏览器地址栏的地址显示为页面2的地址，由于request1和request2是两个不同的请求，request1的scope在页面1，不在页面2，request2的scope在页面2，不在页面1。</p>

<h3 id="section-2">站内请求和站外请求的一般用法</h3>

<h4 id="section-3">1. 什么时候用站内请求</h4>

<p>一般情况下在多个页面内传递参数，就要用到站内跳转，或者浏览器的地址不需要放生改变的情况下可以用站内跳转。</p>

<p>浏览器地址不需要发生改变的情况：
<br />
<img src="/img/post-dispatcher_and_redirect/select.jpg" alt="" /></p>

<p>浏览器对服务器发起请求查询员工信息，服务器返回员工信息的页面，此时浏览器的地址没有发生改变，刷新浏览器（F5）可以再次向服务器发起请求。</p>

<p>request的scope需要作用于多个页面（多个页面内传递参数）或浏览器地址不需要改变的情况下可以用到站内跳转。</p>

<h4 id="url-1">2. 什么时候用站外请求（URL重定向）</h4>
<p><br />
<img src="/img/post-dispatcher_and_redirect/update.jpg" alt="" /></p>

<p>浏览器向服务器提交表单更新数据，若更新成功，则重定向到页面2，失败则重定向到页面3，此时如果浏览器地址栏的地址不发生改变，再次刷新浏览器，则会发生重复提交表单。所以此时无论提交成功或失败都要重定向到新的页面。</p>

<p>一般登录页面，登录成功或失败用URL重定向。</p>

	</div>
</div>
<footer id="footer">
	<a class="icon-footer" href="https://github.com/xianhaiyuan" target="_blank">
		<i class="icon-github"></i>
	</a>
	<a class="icon-footer" href="http://weibo.com/2635183195" target="_blank">
		<i class="icon-sina-weibo"></i>
	</a>
</footer>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</body>
</html>