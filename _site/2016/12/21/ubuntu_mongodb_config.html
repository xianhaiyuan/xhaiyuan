<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="/bitbug_favicon.ico" >
	<link href='//cdn.webfont.youziku.com/webfonts/nomal/16790/19466/581b3353f629d80df8fad786.css' rel='stylesheet' type='text/css' />
	<link rel="stylesheet" href="/css/app.min.css">
<!-- 	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/monokai-sublime.css"> -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="canonical" href="https://www.xhaiyuan.com/2016/12/21/ubuntu_mongodb_config.html" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="renderer" content="webkit">
	<meta http-equiv="Cache-Control" content="no-siteapp">
	<meta name="keywords" content="白色风车 ubuntu配置日记--mongodb配置 海源 个人博客 haiyuan">
	<meta name="description" content="白色风车 海源 haiyuan">
	<meta name="author" content="海源,haiyuan,xianhaiyuan@gmail.com,269699181@qq.com">
	<title>ubuntu配置日记--mongodb配置 - 海源的博客</title>
	<script>
// 	(function() {
//     if ( window.location.protocol.indexOf('s') < 0 ) {
//         window.location.protocol = 'https'
//     }
// })()
</script>
</head>

<body>
	<div class="main">
		<div class="page-title center">
			ubuntu配置日记--mongodb配置
		</div>
	<nav>
		<ul class="nav-list list-nostyled center">
			<li>
				<a class="nav-icon" href="https://www.xhaiyuan.com">
					<i class="icon-home"></i>
				</a>
				<a href="https://www.xhaiyuan.com" class="nav-link center link-active">Home
				</a>
			</li>
			<li>
				<a class="nav-icon" href="https://www.xhaiyuan.com/about">
					<i class="icon-user"></i>
				</a>
				<a href="https://www.xhaiyuan.com/about" class="nav-link center link-active">About
				</a>
			</li>
			<li class="rss">
				<a class="nav-icon" href="/feed.xml"><i class="icon-rss"></i></a>
				<a href="/feed.xml" class="nav-link center link-active" target="_blank">Rss
				</a>
			</li>
		</ul>
	</nav>
	<div class="my_page my_page--post web-font">
		<h4 id="section">1.导入软件仓库的公匙</h4>

<p><code class="highlighter-rouge">Bash
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6
</code></p>

<h4 id="section-1">2.同步软件源</h4>

<p>```Bash
echo “deb [ arch=amd64,arm64 ] http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.4 multiverse” | sudo tee /etc/apt/sources.list.d/mongodb-org-3.4.list</p>

<p>sudo apt-get update
```</p>

<h4 id="mongodb">3.安装mongodb</h4>

<p><code class="highlighter-rouge">Bash
sudo apt-get install -y mongodb-org
</code></p>

<p>mongodb的其他安装可以到官网查看，<a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/">这里</a>是ubuntu的mongodb官网安装指导：</p>

<p>最后安装<a href="https://mongobooster.com">mongobooster</a></p>

<h4 id="mongodb-1">4.关于mongodb</h4>

<p><code class="highlighter-rouge">Bash
启动mongodb服务
sudo service mongod start
关闭mongodb服务
sudo service mongod stop
</code></p>

<ul>
  <li>数据文件存放位置：/var/lib/mongodb</li>
  <li>日志文件存放位置：/var/log/mongodb</li>
  <li>数据库配置文件位置：/etc/mongod.conf，mongod.conf里保存有数据库数据文件路径，日志文件路径，端口号等，可以进行自定义设置。</li>
</ul>

<p><strong>上面方式开启服务，一旦打开其他软件就会断开，所以使用这条命令指定开启服务时数据文件和日志文件的路径并在后台运行：</strong></p>

<p><code class="highlighter-rouge">Bash
sudo mongod --dbpath /var/lib/mongodb/ --logpath /var/log/mongodb/mongodb.log --logappend &amp;
</code></p>

<p><strong>为方便启动，可以写一个shell文件</strong></p>

<p>```Bash
vi mongo.sh</p>

<h1 id="binbash">!/bin/bash</h1>
<p>sudo -S mongod –dbpath /var/lib/mongodb/ –logpath /var/log/mongodb/mongodb.log –logappend &amp; « EOF 
‘password’
EOF</p>

<p>chmod +x mongo.sh
./mongo.sh
```
<strong>关闭服务</strong></p>

<p><code class="highlighter-rouge">Bash
ps -aux | grep mongo
sudo kill 'PID'
</code></p>

<ul>
  <li>–dbpath：指定mongo的数据库文件在哪个文件夹。</li>
  <li>–logpath：指定mongo的log日志是哪个，这里log一定要指定到具体的文件名。</li>
  <li>–logappend：表示log的写入是采用附加的方式，默认的是覆盖之前的文件。</li>
  <li>&amp;：表示程序在后台运行。</li>
</ul>

<p><strong>注意</strong>：如果是系统非正常关闭，这样启动会报错，由于mongodb自动被锁上了，这是需要进入mongodb数据库文件所在的目录（/var/lib/mongodb/）,删除目录中的mongodb.lock文件,然后再进行上述操作。</p>

	</div>
</div>
<footer id="footer">
	<a class="icon-footer" href="https://github.com/xianhaiyuan" target="_blank">
		<i class="icon-github"></i>
	</a>
	<a class="icon-footer" href="http://weibo.com/2635183195" target="_blank">
		<i class="icon-sina-weibo"></i>
	</a>
</footer>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</body>
</html>